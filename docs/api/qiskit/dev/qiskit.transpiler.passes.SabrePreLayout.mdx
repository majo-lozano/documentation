---
title: SabrePreLayout (dev version)
description: API reference for qiskit.transpiler.passes.SabrePreLayout in the dev version of qiskit
in_page_toc_min_heading_level: 1
python_api_type: class
python_api_name: qiskit.transpiler.passes.SabrePreLayout
---

# SabrePreLayout

<Class id="qiskit.transpiler.passes.SabrePreLayout" isDedicatedPage={true} github="https://github.com/Qiskit/qiskit/tree/main/qiskit/transpiler/passes/layout/sabre_pre_layout.py#L27-L168" signature="qiskit.transpiler.passes.SabrePreLayout(*args, **kwargs)" modifiers="class">
  Bases: [`AnalysisPass`](qiskit.transpiler.AnalysisPass "qiskit.transpiler.basepasses.AnalysisPass")

  Choose a starting layout to use for additional Sabre layout trials.

  The pass works by augmenting the coupling map with more and more “extra” edges until VF2 succeeds to find a perfect graph isomorphism. More precisely, the augmented coupling map contains edges between nodes that are within a given distance `d` in the original coupling map. The original edges are noise-free while the additional edges have noise that scales exponentially with the distance. The value of `d` is increased until an isomorphism is found.

  Intuitively, a better VF2 layout involves fewer and of shorter-distance extra edges.

  ## Property Set Values Written

  **`sabre_starting_layouts` (`list[Layout]`)**

  An optional list of [`Layout`](qiskit.transpiler.Layout "qiskit.transpiler.Layout") objects to use for additional Sabre layout trials.

  **References:**

  \[1] Henry Zou and Matthew Treinish and Kevin Hartman and Alexander Ivrii and Jake Lishman. “LightSABRE: A Lightweight and Enhanced SABRE Algorithm” [arXiv:2409.08368](https://doi.org/10.48550/arXiv.2409.08368)

  **param coupling\_map**

  Directed graph representing the original coupling map or a target modelling the backend (including its connectivity).

  **param max\_distance**

  The maximum distance for running VF2 with the augmented coupling map. In particular, this also specifies the maximum distance between the original nodes that become connected in the augmented coupling map.

  **param error\_rate**

  The error rate to assign to the “extra” edges. A non-zero error rate prioritizes VF2 to choose original edges over extra edges.

  **param max\_trials\_vf2**

  Specifies the maximum number of VF2 trials. This option remains primarily for legacy reasons since the introduction of on-the-fly scoring in VF2, which was introduced in Qiskit 2.3. To bound the time for the pass, set parameters `max_distance` and `call_limit_vf2` instead.

  **param call\_limit\_vf2**

  The maximum number of times that the inner VF2 isomorphism search will attempt to extend the mapping. If `None`, then no limit. If a 2-tuple, then the limit starts as the first item, and swaps to the second after the first match is found, without resetting the number of steps taken. This can be used to allow a long search for any mapping, but still terminate quickly with a small extension budget if one is found.

  **param improve\_layout**

  Unused (the option became obsolete with the introduction of on-the-fly scoring in VF2).

  **param min\_distance**

  The distance for the first VF2 run with the augmented coupling map. Setting `min_distance > 1` skips all smaller-distance checks, and in particular skips the distance-1 check which corresponds to running the `VF2Layout` pass.

  **raises TranspilerError**

  At runtime, if the argument `coupling_map` is not provided.

  ## Attributes

  ### is\_analysis\_pass

  <Attribute id="qiskit.transpiler.passes.SabrePreLayout.is_analysis_pass">
    Check if the pass is an analysis pass.

    If the pass is an AnalysisPass, that means that the pass can analyze the DAG and write the results of that analysis in the property set. Modifications on the DAG are not allowed by this kind of pass.
  </Attribute>

  ### is\_transformation\_pass

  <Attribute id="qiskit.transpiler.passes.SabrePreLayout.is_transformation_pass">
    Check if the pass is a transformation pass.

    If the pass is a TransformationPass, that means that the pass can manipulate the DAG, but cannot modify the property set (but it can be read).
  </Attribute>

  ## Methods

  ### execute

  <Function id="qiskit.transpiler.passes.SabrePreLayout.execute" github="https://github.com/Qiskit/qiskit/tree/main/qiskit/passmanager/base_tasks.py#L71-L117" signature="execute(passmanager_ir, state, callback=None)">
    Execute optimization task for input Qiskit IR.

    **Parameters**

    *   **passmanager\_ir** ([*Any*](https://docs.python.org/3/library/typing.html#typing.Any)) – Qiskit IR to optimize.
    *   **state** ([*PassManagerState*](qiskit.passmanager.PassManagerState "qiskit.passmanager.compilation_status.PassManagerState")) – State associated with workflow execution by the pass manager itself.
    *   **callback** ([*Callable*](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable) *| None*) – A callback function which is caller per execution of optimization task.

    **Returns**

    Optimized Qiskit IR and state of the workflow.

    **Return type**

    [tuple](https://docs.python.org/3/library/stdtypes.html#tuple)\[[*Any*](https://docs.python.org/3/library/typing.html#typing.Any), [qiskit.passmanager.compilation\_status.PassManagerState](qiskit.passmanager.PassManagerState "qiskit.passmanager.compilation_status.PassManagerState")]
  </Function>

  ### name

  <Function id="qiskit.transpiler.passes.SabrePreLayout.name" github="https://github.com/Qiskit/qiskit/tree/main/qiskit/passmanager/base_tasks.py#L67-L69" signature="name()">
    Name of the pass.

    **Return type**

    [str](https://docs.python.org/3/library/stdtypes.html#str)
  </Function>

  ### run

  <Function id="qiskit.transpiler.passes.SabrePreLayout.run" github="https://github.com/Qiskit/qiskit/tree/main/qiskit/transpiler/passes/layout/sabre_pre_layout.py#L107-L147" signature="run(dag)">
    Run the SabrePreLayout pass on dag.

    The discovered starting layout is written to the property set value `sabre_starting_layouts`.

    **Parameters**

    **dag** ([*DAGCircuit*](qiskit.dagcircuit.DAGCircuit "qiskit.dagcircuit.DAGCircuit")) – DAG to create starting layout for.
  </Function>

  ### update\_status

  <Function id="qiskit.transpiler.passes.SabrePreLayout.update_status" github="https://github.com/Qiskit/qiskit/tree/main/qiskit/passmanager/base_tasks.py#L119-L137" signature="update_status(state, run_state)">
    Update workflow status.

    **Parameters**

    *   **state** ([*PassManagerState*](qiskit.passmanager.PassManagerState "qiskit.passmanager.compilation_status.PassManagerState")) – Pass manager state to update.
    *   **run\_state** (*RunState*) – Completion status of current task.

    **Returns**

    Updated pass manager state.

    **Return type**

    [*PassManagerState*](qiskit.passmanager.PassManagerState "qiskit.passmanager.compilation_status.PassManagerState")
  </Function>
</Class>

